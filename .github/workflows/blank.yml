name: CI
on:
  push:
    branches: [ "main" ]
env:
    GH_TOKEN: ${{ github.token }}
    GITHUB_TOKEN: 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
    
jobs:
  runid:
      runs-on: ubuntu-latest
      steps:
      - name: checkout repository
        uses: actions/checkout@v3

      - name: Display current Workflow Run ID
        run: |
            echo " current Workflow Run ID: ${{ github.run_id }}"

      - name: Get Previous Run ID
        id: get_previous_run_id
        run: |
          # Use GitHub API to get the list of workflow runs
          response=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            "https://api.github.com/repos/${{ github.repository }}/actions/runs")
          # Parse JSON response and get the ID of the previous run
          previous_run_id=$(echo "$response" | jq -r '.workflow_runs[1].id')
          echo "Previous Run ID: $previous_run_id"
          echo "::set-output name=previous_run_id::$previous_run_id"

      - name: get a list of workflow runs 
        run: |
             #echo "getting list of workflow runs.."
             #gh api \
             #/repos/alimelus/github_delete/actions/runs

             curl --request GET \
             --url https://https://github.com/alimelus/2023-01/workflows \
             --header 'Authorization: bearer YOUR_API_KEY' \
             --header 'accept: application/json'

          
