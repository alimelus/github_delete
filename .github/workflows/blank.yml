name: Delete Old Workflow Run

on:
 push:
   branches:
      hotfix

jobs:
  delete_old_run:
    runs-on: ubuntu-latest

    steps:
       - name: Set Date Environment Variable
         run: |
          # display current date
          date
          # Calculate day ago from today's date
          DAY_AGO=$(date -u -d "1 day ago" +"%Y-%m-%dT%H:%M:%SZ")
          echo "DAY_AGO=$DAY_AGO" >> $GITHUB_ENV

       - name: Display Calculated Date
         run: |
          echo "One day ago: $DAY_AGO"
    
       - name: Get Workflow Runs
         id: get_runs
         run: |
             # Fetch workflow run IDs using jq and curl
               workflow_run_ids=$(curl -s -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" "https://api.github.com/repos/${{ github.repository }}/actions/runs" | jq -r ".workflow_runs[].id")
               echo workflow_run_ids: $workflow_run_ids
             
  
 
